{
  "swagger": "2.0",
  "info": {
    "description": "数据服务-查询接口（包括单笔/批量查询、使用记录查询等）",
    "version": "1.0.0",
    "title": "商户站数据服务查询 API",
    "contact": {
      "name": "API Team",
      "url": "http://wordnik.com",
      "email": "apiteam@wordnik.com"
    }
  },
  "host": "localhost:8080",
  "basePath": "/api",
  "tags": [
    {
      "name": "数据服务查询",
      "description": "数据服务-查询接口（单笔查询、批量查询）"
    }
  ],
  "schemes": [
    "https"
  ],
  "paths": {
    "/data-service/{code}/query-ui": {
      "get": {
        "tags": [
          "数据服务查询"
        ],
        "summary": "UI模版查询",
        "description": "",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "description": "服务编码",
            "required": true,
            "type": "string"
          },
          {
            "name": "type",
            "in": "query",
            "description": "UI模版类型\n0：返回单笔记录查询UI模版；\n1：返回数据服务UI模版；",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "UI模版",
            "schema": {
              "$ref": "#/definitions/UI查询结果"
            }
          },
          "204": {
            "description": "暂未配置UI模版"
          },
          "400": {
            "description": "请求参数错误"
          }
        }
      }
    },
    "/single-query-record/{code}": {
      "get": {
        "tags": [
          "数据服务查询"
        ],
        "summary": "使用记录查询",
        "description": "",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "description": "服务编码",
            "required": true,
            "type": "string"
          },
          {
            "name": "sDate",
            "in": "query",
            "description": "开始时间",
            "required": true,
            "type": "string"
          },
          {
            "name": "eData",
            "in": "query",
            "description": "结束时间",
            "required": true,
            "type": "string"
          },
          {
            "name": "pageNumber",
            "in": "query",
            "description": "分页起始页数",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页记录数，默认20",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "query",
            "in": "query",
            "description": "动态查询参数\n根据【需求文档-数据API界面详情】中表单中文字段 找到对应【商户站数据服务一期接口文档】中的服务请求报文体（body）中的字段名;\n格式示例：query=id_card:xxx;name_card:xxx",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/使用记录查询-返回结果"
            }
          }
        }
      },
      "post": {
        "tags": [
          "数据服务查询"
        ],
        "summary": "提交单笔记录查询",
        "description": "",
        "consumes": [],
        "produces": [],
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "description": "服务编码",
            "required": true,
            "type": "string"
          },
          {
            "name": "query...",
            "in": "query",
            "description": "query为动态字段：键值对查询参数；\n根据【需求文档-数据API界面详情】中表单中文字段 ，找到对应【商户站数据服务一期接口文档】中的服务请求报文体（body）中的字段名",
            "required": true,
            "type": "string",
            "x-example": "{  \"bankNo\":\"666666666666666666\",  \"name\":\"测试\",  \"idType\":\"01\",  \"idNo\":\"330110199900000000\",  \"reqType\":\"01\"  }"
          }
        ],
        "responses": {
          "200": {
            "description": "json串",
            "schema": {
              "type": "string"
            }
          },
          "400": {
            "description": "请求失败，参数错误",
            "schema": {
              "type": "string"
            }
          }
        }
      }
    },
    "/single-query-record/{code}/report": {
      "get": {
        "tags": [
          "数据服务查询"
        ],
        "summary": "使用记录导出",
        "description": "",
        "consumes": [],
        "produces": [],
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "description": "服务编码",
            "required": true,
            "type": "string"
          },
          {
            "name": "sDate",
            "in": "query",
            "description": "开始时间",
            "required": true,
            "type": "string"
          },
          {
            "name": "eDate",
            "in": "query",
            "description": "结束时间",
            "required": true,
            "type": "string"
          },
          {
            "name": "pageNumber",
            "in": "query",
            "description": "分页起始页数",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页记录数",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "query",
            "in": "query",
            "description": "动态查询参数\n根据【需求文档-数据API界面详情】中表单中文字段 找到对应【商户站数据服务一期接口文档】中的服务请求报文体（body）中的字段名;\n格式示例：query=id_card:xxx;name_card:xxx",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "EXCEL文件",
            "schema": {
              "type": "string",
              "format": "byte"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "UI查询结果": {
      "type": "object",
      "properties": {
        "ui": {
          "type": "string",
          "description": "UI模版"
        }
      }
    },
    "使用记录查询-返回结果": {
      "type": "object",
      "required": [
        "contentHeader"
      ],
      "properties": {
        "contentHeader": {
          "type": "object",
          "description": "返回数据的中文字段名，用于前端tabl表头展示，\n如：\n{\n    \"order_id\": \"订单流水号\",\n    \"created_date\": \"操作时间\",\n    \"name_card\": \"身份证姓名\",\n    \"id_card\": \"身份证号码\",\n    \"response_body\": \"查询结果\"\n  }",
          "properties": {}
        },
        "pager": {
          "type": "object",
          "properties": {
            "content": {
              "type": "array",
              "description": "数据内容列表",
              "items": {
                "type": "object",
                "properties": {
                  "created_date": {
                    "type": "string",
                    "description": "操作时间"
                  },
                  "order_id": {
                    "type": "string",
                    "description": "订单流水号"
                  },
                  "queryParams...": {
                    "type": "object",
                    "description": "动态字段个数：为各输入字段（详见数据API界面详情）",
                    "properties": {}
                  },
                  "response_body": {
                    "type": "string",
                    "description": "查询结果"
                  }
                },
                "required": [
                  "created_date",
                  "order_id",
                  "queryParams...",
                  "response_body"
                ]
              }
            },
            "first": {
              "type": "string",
              "description": "是否第一页：true/false"
            },
            "last": {
              "type": "string",
              "description": "是否最后一页：true/false"
            },
            "numberOfElements": {
              "type": "string",
              "description": "返回当前页的记录数\n（最后一页时，numberOfElements可能小于size）"
            },
            "size": {
              "type": "string",
              "description": "请求每页的记录数"
            },
            "totalElements": {
              "type": "string",
              "description": "总数据条数"
            },
            "totalPages": {
              "type": "string",
              "description": "总页数"
            },
            "xxx": {
              "type": "string"
            }
          },
          "required": [
            "content",
            "first",
            "last",
            "numberOfElements",
            "size",
            "totalElements",
            "totalPages"
          ]
        }
      }
    }
  }
}